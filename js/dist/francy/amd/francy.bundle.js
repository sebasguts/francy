define(function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(4)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));if(new.target===t)throw new TypeError("Cannot construct [Renderer] instances directly!");if(void 0===i.render||"function"!=typeof i.render)throw new TypeError("Must override [render(json)] method!");return void 0===i.unrender&&i.logger.debug("No [unrender()] method specified..."),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"HTMLParent",get:function(){return d3.select(this.options.appendTo.node().parentNode)}},{key:"SVGParent",get:function(){return this.options.appendTo}}]),t}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(4)),i=r(n(13)),c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"execute",value:function(e){return Object.keys(e.callback.requiredArgs).length?new i.default(this.options).render(e):this.options.callbackHandler(e.callback)}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));return i.tooltip=i.SVGParent.select("foreignObject.francy-tooltip-holder"),i.tooltip.node()||(i.tooltip=i.SVGParent.append("foreignObject").attr("class","francy-tooltip-holder")),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(e){if(e&&Object.values(e).length&&(this.tooltip.attr("transform","translate("+(d3.event.offsetX+5)+","+(d3.event.offsetY+5)+")"),!this.tooltip.selectAll("*").node())){var t=this.tooltip.append("xhtml:div").attr("class","francy-tooltip").append("div").attr("class","francy-table").append("div").attr("class","francy-table-body");Object.keys(e).map(function(n){var r=t.append("div").attr("class","francy-table-row");r.append("div").attr("class","francy-table-cell").text(e[n].title),r.append("div").attr("class","francy-table-cell").text(e[n].text)}),this.tooltip.style("display","block").attr("width","100%").attr("height","500px")}}},{key:"unrender",value:function(){this.tooltip.selectAll("*").remove(),this.tooltip.style("display",null)}}]),t}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(16)),c=r(n(17)),l=r(n(18)),u=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){if(e.canvas.chart){var t=void 0;switch(e.canvas.chart.type){case"bar":t=new i.default(this.options).render(e);break;case"line":t=new c.default(this.options).render(e);break;case"scatter":t=new l.default(this.options).render(e)}return t}}},{key:"unrender",value:function(){}}],[{key:"domainRange",value:function(e){return Array.from(new Array(e),function(e,t){return t}).map(function(e){return e})}},{key:"colors",get:function(){return d3.scaleSequential().domain([0,100]).interpolator(d3.interpolateRainbow)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(10)),o=function(){function e(t){var n=t.verbose,r=void 0!==n&&n,o=t.appendTo,i=t.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={verbose:r,appendTo:o,callbackHandler:i},this.logger=new a.default(this.options)}return r(e,[{key:"update",value:function(e){var t=e.verbose,n=void 0!==t&&t,r=e.appendTo,a=e.callbackHandler;return this.options={verbose:n,appendTo:r,callbackHandler:a},this}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(1)),c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"traverse",value:function(e,t){for(var n=this;t.hasNext();){var r=t.next(),a=e.append("li"),o=a.selectAll("a").data([r]).enter().append("a").attr("title",r.title).html(r.title);if(r.callback&&Object.values(r.callback).length&&o.on("click",function(e){return new i.default(n.options).execute(e)}),r.menus&&Object.values(r.menus).length>0){var c=a.append("ul"),l=this.iterator(Object.values(r.menus));this.traverse(c,l)}}}},{key:"iterator",value:function(e){var t=0;return{next:function(){return this.hasNext()?e[t++]:void 0},hasNext:function(){return t<e.length},count:function(){return e.length}}}},{key:"unrender",value:function(){}}]),t}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(7)),i=r(n(8)),c=r(n(12)),l=r(n(14)),u=r(n(3)),s={},f=function(){function e(t){var n=t.verbose,r=void 0!==n&&n,a=t.appendTo,o=t.callbackHandler;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!o)throw new Error("A Callback Handler must be provided! This will be used to trigger events from the graphics produced...");if(!a)throw new Error("Missing an element or id to append the graphics to...!");if(!d3)throw new Error("D3 is not imported! Francy won't work without it... please import D3 v4+.");this.options={verbose:r,appendTo:a,callbackHandler:o}}return a(e,[{key:"render",value:function(e){var t=o.default.parse(e);if(t){var n=new i.default(this.options),r=new c.default(this.options),a=new l.default(this.options),f=new u.default(this.options);n.add(r),n.add(a),n.add(f);var d=n.render(t);return s[t.canvas.id]=d,d.node()}}},{key:"unrender",value:function(e){delete s[e]}}]),e}();t.default=f;try{t.Francy=window.Francy=f,window.onresize=function(){Object.values(s).forEach(function(e){e.zoomToFit()}),d3.selectAll("foreignObject.francy-main-menu-holder").attr("width","100%")}}catch(e){t.Francy=f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"parse",value:function(e){e=(e="string"!=typeof e?JSON.stringify(e):e).replace(/[\n\r\b\\]+|(gap>)/g,"");var t=/{(?:[^])*}/g.exec(e);if(t){e=t[0];try{var n=JSON.parse(e);return"application/vnd.francy+json"===n.mime?n:void 0}catch(e){console.error(e)}}}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(9)),i=r(n(11)),c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){function t(){c.attr("transform",d3.event.transform)}var n=d3.select(this.options.appendTo),r=e.canvas.id,a=d3.select("svg#"+r);if(a.node()||(this.logger.debug("Creating Canvas ["+r+"]..."),a=n.append("svg").attr("id",r).attr("class","francy francy-canvas")),!a.node())throw new Error("Oops, could not create canvas with id ["+r+"]... Cannot proceed.");a.attr("width",e.canvas.width).attr("height",e.canvas.height);var o=d3.zoom(),c=a.select("g.francy-content");c.node()||(c=a.append("g").attr("class","francy-content"),o.on("zoom",t),a.call(o).on("dblclick.zoom",null)),a.on("click",function(){d3.event.defaultPrevented&&d3.event.stopPropagation()},!0),a.zoomToFit=function(){if(e.canvas.zoomToFit){var t=c.node().getBBox(),n=a.node().getBoundingClientRect(),r=n.right-n.left,i=n.bottom-n.top+45,l=t.width,u=t.height;if(0==l||0==u)return;var s=t.x+l/2,f=t.y+u/2,d=.75/Math.max(l/r,u/i),p=r/2-d*s,y=i/2-d*f;c.transition().duration(2e3).attr("transform","translate("+p+","+y+")scale("+d+","+d+")").on("end",function(){return function(e,t,n){a.call(o.transform,d3.zoomIdentity.translate(e,t).scale(n,n))}(p,y,d)})}},this.logger.debug("Canvas updated ["+r+"]..."),this.options.appendTo=a;return new i.default(this.options).render(e.canvas.messages),this.renderChildren(a,e),a}},{key:"unrender",value:function(){}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));if(new.target===t)throw new TypeError("Cannot construct [Composite] instances directly!");return i.renderers=[],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"add",value:function(e){this.renderers.push(e)}},{key:"renderChildren",value:function(e,t){var n=this.options;e&&(n.appendTo=e);var r=!0,a=!1,o=void 0;try{for(var i,c=this.renderers[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){i.value.update(n).render(t)}}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=null,o=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).verbose,n=void 0!==t&&t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a)return a;this.verbose=n,this.console=console,a=this}return r(e,[{key:"debug",value:function(e){this.verbose&&this.console.debug(this._format("DEBUG",e))}},{key:"info",value:function(e){this.console.info(this._format("INFO",e))}},{key:"error",value:function(e,t){this.console.error(this._format("ERROR",e),t)}},{key:"warn",value:function(e,t){t=t||{},this.console.error(this._format("WARN",e),t)}},{key:"_format",value:function(e,t){return"["+e+"] - "+(new Date).toISOString()+" - "+t}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(e){if(e&&Object.values(e).length){this.SVGParent.selectAll(".tmp").data(Object.keys(e)).enter().append("text").attr("x",-1e3).attr("y",-1e3).attr("class","tmp").text(function(t){return e[t].title+e[t].text}).call(this.wrap);var t=this.SVGParent.selectAll(".tmp").nodes().map(function(e){return e.getBBox()}),n=d3.max(t.map(function(e){return e.width}));n=Math.round(n+40);var r=Math.round(d3.max(t.map(function(e){return e.height+40})));this.SVGParent.selectAll(".tmp").remove();var a=this.SVGParent.select("g.francy-alerts");a.node()||(a=this.SVGParent.append("g").attr("class","francy-alerts")),(a=a.selectAll("g.francy-alert").data(Object.keys(e))).exit().remove(),(a=a.enter().append("g").attr("class","francy-alert").attr("id",function(e){return e})).append("rect").attr("class",function(t){return"francy-alert alert-"+e[t].type}).attr("transform",function(e,t){return"translate(10,"+(55+t*(r+5))+")"}).attr("rx","5").attr("ry","5").attr("width",n).attr("height",r),a.append("text").attr("transform",function(e,t){return"translate(30,"+(55+t*(r-5)+40)+")"}).text(function(t){return e[t].title+e[t].text}).call(this.wrap),a.merge(a),a.on("click",function(){d3.select(this).style("display","none")})}}},{key:"wrap",value:function(e){e.each(function(){var e,t=d3.select(this),n=t.text().split(/[\s\n]+/).reverse(),r=[],a=0,o=t.attr("y"),i=t.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy","0em");for(e=n.pop();e;)r.push(e),i.text(r.join(" ")),i.node().getComputedTextLength()>300&&(r.pop(),i.text(r.join(" ")),r=[e],i=t.append("tspan").attr("x",0).attr("y",o).attr("dy",1.1*++a+0+"em").text(e)),e=n.pop()})}},{key:"unrender",value:function(){}}]),t}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(5)),i=r(n(1)),c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){var t=this;if(e.canvas.menus&&Object.values(e.canvas.menus).length){var n=this.SVGParent.select("g.francy-main-menu");if(!n.node()){n=this.SVGParent.append("g").attr("class","francy-main-menu");var r=Object.values(e.canvas.menus),a=this;this.SVGParent.selectAll(".tmp").data(r).enter().append("text").text(function(e){return e.title}).attr("x",-1e3).attr("y",-1e3).attr("class","tmp");var o=this.SVGParent.selectAll(".tmp").nodes().map(function(e){return e.getBBox()}),c=d3.max(o.map(function(e){return e.width}));c=Math.round(c+20);var l=Math.round(d3.max(o.map(function(e){return e.height+20})));return this.SVGParent.selectAll(".tmp").remove(),n.append("rect").attr("transform","translate(0,0)").attr("width","100%").attr("height",l).attr("class","francy-menu-border"),n.append("rect").attr("transform","translate(0,0)").attr("width","100%").attr("height",l),n.selectAll("g.francy-menu-entry").data(r).enter().append("g").attr("class","francy-menu-entry").attr("id",function(e){return e.id}).on("mouseover",function(e){e.menus&&Object.values(e.menus).length?a.buildMenu(d3.select(this),e):d3.select(this).classed("francy-menu-entry-selected",!0)}).on("mouseout",function(){d3.select(this).classed("francy-menu-entry-selected",!1)}),n.selectAll("g.francy-menu-entry").append("rect").attr("transform",function(e,t){return"translate("+(5+t*c)+",0)"}).attr("width",c).attr("height",l),n.selectAll("g.francy-menu-entry").append("text").attr("transform",function(e,t){return"translate("+(5+t*c+10)+","+(0+l/1.7)+")"}).text(function(e){return e.title}),n.selectAll("g.francy-menu-entry rect").on("click",function(e){e.menus&&Object.values(e.menus).length||new i.default(t.options).execute(e)}),n}}else this.logger.debug("No Menu to render here... continuing...")}},{key:"unrender",value:function(){}},{key:"buildMenu",value:function(e,t){var n=this,r=e.select("g.francy-submenu");if(!r.node()){r=e.append("g").attr("class","francy-submenu");var a=this.flatten(t.menus);this.SVGParent.selectAll(".tmp").data(a).enter().append("text").text(function(e){return e.title}).attr("x",-1e3).attr("y",-1e3).attr("class","tmp");var o=this.SVGParent.selectAll(".tmp").nodes().map(function(e){return e.getBBox()}),c=d3.max(o.map(function(e){return e.width}));c=Math.round(c+20);var l=Math.round(d3.max(o.map(function(e){return e.height+20}))),u=e.select("rect").node().getBBox();c=c<u.width?u.width:c;var s=e.select("rect").node().transform.baseVal.consolidate().matrix,f=s.e,d=s.f+u.height+1;return this.SVGParent.selectAll(".tmp").remove(),r.append("rect").attr("transform","translate("+f+","+d+")").attr("width",c).attr("height",l*a.length).attr("class","francy-menu-border"),r.append("rect").attr("transform","translate("+f+","+d+")").attr("width",c).attr("height",l*a.length),r.selectAll("g.francy-menu-entry").data(a).enter().append("g").attr("class","francy-menu-entry").on("mouseover",function(){d3.select(this).classed("francy-menu-entry-selected",!0)}).on("mouseout",function(){d3.select(this).classed("francy-menu-entry-selected",!1)}),r.selectAll("g.francy-menu-entry").append("rect").attr("transform",function(e,t){return"translate("+f+","+(d+t*l)+")"}).attr("width",c).attr("height",l).attr("id",function(e){return e.id}),r.selectAll("g.francy-menu-entry").append("text").attr("transform",function(e,t){return"translate("+(f+10)+","+(d+(t*l+20))+")"}).text(function(e){return e.title}).attr("id",function(e){return e.id}),r.selectAll("g.francy-menu-entry").on("click",function(e){return new i.default(n.options).execute(e)}),r}}},{key:"flatten",value:function(e){var t=this;return[].concat.apply([],Object.values(e).map(function(e){return e.menus&&Object.values(e.menus).length>0?t.flatten(e.menus):e}))}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(e){var t=this,n=e.callback.id;this.logger.debug("Creating Callback Modal ["+n+"]...");var r=d3.select("body").append("div").attr("class","francy-overlay"),a=d3.select("body").append("div").attr("class","francy"),o=a.append("div").attr("id",n).attr("class","francy-modal"),i=o.append("form"),c=i.append("div").attr("class","francy-modal-header").append("span").html("Required arguments&nbsp;");e.title&&c.append("span").attr("style","font-weight: bold;").text("for "+e.title);var l=i.append("div").attr("class","francy-modal-content").append("div").attr("class","francy-table").append("div").attr("class","francy-table-body"),u=!0,s=!1,f=void 0;try{for(var d,p=Object.values(e.callback.requiredArgs)[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var y=d.value,h=l.append("div").attr("class","francy-table-row");h.append("div").attr("class","francy-table-cell").append("label").attr("for",y.id).text(y.title);var b=h.append("div").attr("class","francy-table-cell").append("input").attr("id",y.id).attr("class","francy-arg").attr("required","").attr("name",y.id).attr("type",y.type).attr("value",y.value).on("change",function(){e.callback.requiredArgs[this.id].value=this.value}).on("input",this.onchange).on("keyup",this.onchange).on("paste",this.onchange);"boolean"===y.type&&(y.value=y.value||!1,b.attr("type","checkbox").attr("required",null).attr("value",y.value).on("change",function(){e.callback.requiredArgs[this.id].value=this.value=this.checked})),h.append("span").attr("class","validity")}}catch(e){s=!0,f=e}finally{try{!u&&p.return&&p.return()}finally{if(s)throw f}}var v=i.append("div").attr("class","francy-modal-footer");v.append("button").text("Ok").on("click",function(){return i.node().checkValidity()&&(t.options.callbackHandler(e.callback),r.remove(),o.remove(),a.remove()),d3.event.preventDefault(),!1}),v.append("button").text("Cancel").on("click",function(){return r.remove(),o.remove(),a.remove(),d3.event.preventDefault(),!1});try{Jupyter.keyboard_manager.register_events(".francy"),Jupyter.keyboard_manager.register_events(".francy-arg"),Jupyter.keyboard_manager.register_events(".francy-overlay"),Jupyter.keyboard_manager.register_events(".francy-modal")}catch(e){"ReferenceError"==e.name&&t.logger.debug("It seems we're not running on Jupyter...",e)}return l.selectAll(".francy-arg").node().focus(),this.logger.debug("Callback Modal updated ["+n+"]..."),o}},{key:"unrender",value:function(){}}]),t}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(15)),c=r(n(2)),l=r(n(1)),u=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,null,[{key:"getSymbol",value:function(e){return"circle"===e?d3.symbolCircle:"cross"===e?d3.symbolCross:"diamond"===e?d3.symbolDiamond:"square"===e?d3.symbolSquare:"triangle"===e?d3.symbolTriangle:"star"===e?d3.symbolStar:"wye"===e?d3.symbolWye:d3.symbolCircle}},{key:"colors",get:function(){return d3.scaleSequential().domain([0,100]).interpolator(d3.interpolateRainbow)}}]),a(t,[{key:"render",value:function(e){function n(){_.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),k.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),P.attr("x",function(e){return e.x-e.title.length-Math.sqrt(e.size*e.title.length*2)}).attr("y",function(e){return e.y-Math.sqrt(2*e.size)}),k.each(function(e){var t=d3.quadtree(b);return function(n){var r=100*n.size+R,a=n.x-r,o=n.x+r,i=n.y-r,c=n.y+r;t.visit(function(t,l,u,s,f){if(t.point&&t.point!==n){var d=n.x-t.point.x,p=n.y-t.point.y,y=Math.sqrt(d*d+p*p);y<r&&(y=(y-r)/y*e,n.x-=d*=y,n.y-=p*=y,t.point.x+=d,t.point.y+=p)}return l>o||s<a||u>c||f<i})}}(1))}function r(){function e(e,t){return V[e.index+","+t.index]}if(d3.event.preventDefault(),0===B){var t=d3.select(this).node().__data__;k.style("opacity",function(n){return e(t,n)||e(n,t)?1:.1}),_.style("opacity",function(e){return t.index===e.source.index||t.index===e.target.index?1:.1}),B=1}else k.style("opacity",1),_.style("opacity",1),B=0}function a(e){d3.event.active||H.alphaTarget(.01).restart(),e.fx=e.x,e.fy=e.y}function o(e){e.fx=d3.event.x,e.fy=d3.event.y}function u(e){d3.event.active||H.alphaTarget(0),e.fx=null,e.fy=null}function s(e,t){e.callbacks&&Object.values(e.callbacks).forEach(function(e){e.trigger===t&&y.execute({callback:e})})}if(e.canvas.graph){var f=!1,d=new c.default(this.options),p=new i.default(this.options),y=new l.default(this.options),h=this.options.appendTo,b=e.canvas.graph.nodes?Object.values(e.canvas.graph.nodes):[],v=e.canvas.graph.links?Object.values(e.canvas.graph.links):[],g=h.select("g.francy-content"),m=+h.attr("width")||d3.select("body").node().getBoundingClientRect().width,x=+h.attr("height")||d3.select("body").node().getBoundingClientRect().height,w=g.selectAll("g.francy-links");w.node()||(w=g.append("g").attr("class","francy-links"));var _=w.selectAll("line.francy-link").data(v);(_.enter().data().length>0||_.enter().data().length>0)&&(f=!0),_.exit().remove(),_=_.enter().append("line").attr("class","francy-link").attr("id",function(e){return e.source+","+e.target}).attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}).merge(_),"directed"===e.canvas.graph.type&&(h.append("defs").selectAll("marker").data(["arrow"]).enter().append("marker").attr("class","francy-arrows").attr("id",function(e){return e}).attr("viewBox","0 -5 10 10").attr("refX",25).attr("refY",0).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5 L10,0 L0, -5"),_.style("marker-end","url(#arrow)"));var O=g.selectAll("g.francy-nodes");O.node()||(O=g.append("g").attr("class","francy-nodes"));var k=O.selectAll("path.francy-node").data(b);(k.enter().data().length>0||k.enter().data().length>0)&&(f=!0),k.exit().remove(),(k=k.enter().append("path").merge(k).attr("d",d3.symbol().type(function(e){return t.getSymbol(e.type)}).size(function(e){return 100*e.size})).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).style("fill",function(e){return t.colors(5*e.layer)}).attr("class",function(e){return"francy-node"+(e.highlight?" francy-highlight":"")+(Object.values(e.menus).length?" francy-context":"")}).attr("id",function(e){return e.id})).append("title").text(function(e){if(e.messages&&Object.values(e.messages).length)return Object.keys(e.messages).map(function(t){return e.messages[t].title+": "+e.messages[t].text}).join("\n")}),e.canvas.graph.drag&&k.call(d3.drag().on("start",a).on("drag",o).on("end",u)),k.on("contextmenu",function(e){d3.event.preventDefault(),p.render(e),s.call(this,e,"contextmenu")}).on("click",function(e){r.call(this),s.call(this,e,"click")}).on("dblclick",function(e){s.call(this,e,"dblclick")}).on("mouseover",function(){}).on("mouseout",function(){});var j=g.selectAll(".francy-labels");j.node()||(j=g.append("g").attr("class","francy-labels"));var P=j.selectAll("text").data(b);if(P.exit().remove(),(P=P.enter().append("text").merge(P).attr("class","francy-label").text(function(e){return e.title}).attr("x",function(e){return e.x-e.title.length-Math.sqrt(e.size*e.title.length*2)}).attr("y",function(e){return e.y-Math.sqrt(2*e.size)})).on("contextmenu",function(e){p.render(e),s.call(this,e,"contextmenu")}).on("click",function(e){r.call(this),s.call(this,e,"click")}).on("dblclick",function(e){s.call(this,e,"dblclick")}).on("mouseover",function(e){d.render(e.messages)}).on("mouseout",function(){d.unrender()}),e.canvas.graph.simulation&&f){var T=d3.forceCenter().x(m/2).y(x/2),A=d3.forceManyBody().strength(30*-b.length),E=d3.forceLink(v).id(function(e){return e.id}).distance(50),M=d3.forceCollide(function(e){return 2*e.size}),C=d3.forceX(m/2).strength(.05),S=d3.forceY(x/2).strength(.25);"hasse"===e.canvas.graph.type&&(C=d3.forceX(m/2).strength(.5),S=d3.forceY(function(e){return 50*e.layer}).strength(5));var H=d3.forceSimulation(b).force("charge",A).force("link",E).force("center",T).force("x",C).force("y",S).force("collide",M).on("tick",n).on("end",function(){h.zoomToFit()});H.restart()}else h.zoomToFit();for(var R=10,B=0,V={},G=0;G<b.length;G++)V[G+","+G]=1;return v.forEach(function(e){V[e.source.index+","+e.target.index]=1}),g}this.logger.debug("No Graph to render here... continuing...")}},{key:"unrender",value:function(){}}]),t}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(5)),i=r(n(1)),c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){var t=this;if(e.menus&&Object.values(e.menus).length){var n=this.SVGParent.select("g.francy-context-menu");if(!n.node()){n=this.SVGParent.append("g").attr("class","francy-context-menu");var r=this.flatten(e.menus);this.SVGParent.selectAll(".tmp").data(r).enter().append("text").text(function(e){return e.title}).attr("x",-1e3).attr("y",-1e3).attr("class","tmp");var a=this.SVGParent.selectAll(".tmp").nodes().map(function(e){return e.getBBox()}),o=d3.max(a.map(function(e){return e.width}));o=Math.round(o+10);var c=Math.round(d3.max(a.map(function(e){return e.height+10}))),l=d3.mouse(this.SVGParent.node()),u=l[0]+5,s=l[1]+5;return this.SVGParent.selectAll(".tmp").remove(),n.append("rect").attr("transform","translate("+u+","+s+")").attr("width",o).attr("height",c*r.length).attr("class","francy-menu-border"),n.selectAll("g.francy-menu-entry").data(r).enter().append("g").attr("class","francy-menu-entry").on("mouseover",function(){d3.select(this).classed("francy-menu-entry-selected",!0)}).on("mouseout",function(){d3.select(this).classed("francy-menu-entry-selected",!1)}),n.selectAll("g.francy-menu-entry").append("rect").attr("transform",function(e,t){return"translate("+u+","+(s+t*c)+")"}).attr("width",o).attr("height",c).attr("id",function(e){return e.id}),n.selectAll("g.francy-menu-entry").append("text").attr("transform",function(e,t){return"translate("+(u+5)+","+(s+t*c+15)+")"}).text(function(e){return e.title}).attr("id",function(e){return e.id}),n.selectAll("g.francy-menu-entry").on("click",function(e){return new i.default(t.options).execute(e)}),this.SVGParent.on("click",function(){return n.remove()}),n}}else this.logger.debug("No ContextMenu to render here... continuing...")}},{key:"unrender",value:function(){}},{key:"flatten",value:function(e){var t=this;return[].concat.apply([],Object.values(e).map(function(e){return e.menus&&Object.values(e.menus).length>0?t.flatten(e.menus):e}))}}]),t}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(2)),c=r(n(3)),l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){if(e.canvas.chart){var t=new i.default(this.options),n=this.options.appendTo,r=e.canvas.chart.axis,a=e.canvas.chart.data,o=Object.keys(a),l=n.select("g.francy-content"),u=50,s=50,f=50,d=50,p=+n.attr("width")||d3.select("body").node().getBoundingClientRect().width,y=+n.attr("height")||d3.select("body").node().getBoundingClientRect().height;p=p-d-s,y=y-u-f;var h=d3.scaleBand().range([0,p]).padding(.1).domain(r.x.domain),b=d3.scaleLinear().range([y,0]).domain(r.y.domain),v=[];o.forEach(function(e){return v=v.concat(a[e])}),r.y.domain.length||b.domain([0,d3.max(v,function(e){return e})]),r.x.domain.length||(r.x.domain=c.default.domainRange(v.length/o.length),h.domain(r.x.domain));var g=l.selectAll("g.francy-bars");g.node()||(g=l.append("g").attr("class","francy-bars")),o.forEach(function(e,n){var i=g.selectAll(".francy-bar"+n).data(a[e]);i.exit().remove(),i.enter().append("rect").style("fill",function(){return c.default.colors(5*n)}).attr("class","francy-bar"+n).attr("x",function(e,t){return h(r.x.domain[t])+n*(h.bandwidth()/o.length)}).attr("width",h.bandwidth()/o.length-1).attr("y",function(e){return b(e)}).attr("height",function(e){return y-b(e)}).on("mouseover",function(n){d3.select(this).transition().duration(250).style("fill-opacity",.5),t.render({Dataset:e,Value:n})}).on("mouseout",function(){d3.select(this).transition().duration(250).style("fill-opacity",1),t.unrender()}),i.merge(i)});var m=l.selectAll("g.francy-x-axis");m.node()||(m=l.append("g").attr("class","francy-x-axis")),m.selectAll("*").remove(),m.attr("transform","translate(0,"+y+")").call(d3.axisBottom(h)).append("text").attr("dy",50).attr("dx",p/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.x.title);var x=l.selectAll("g.francy-y-axis");x.node()||(x=l.append("g").attr("class","francy-y-axis")),x.selectAll("*").remove(),x.call(d3.axisLeft(b)).append("text").attr("dx",-50).attr("dy",y/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.y.title);var w=l.selectAll(".francy-legend");w.node()||(w=l.append("g").attr("class","francy-legend")),w.selectAll("*").remove();var _=w.selectAll("g").data(o.slice());return _.exit().remove(),(_=_.enter().append("g").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).merge(_)).append("rect").attr("x",p+20).attr("width",19).attr("height",19).style("fill",function(e,t){return c.default.colors(5*t)}),_.append("text").attr("x",p+80).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(e){return e}),n.zoomToFit(),l}this.logger.debug("No BarChart to render here... continuing...")}},{key:"unrender",value:function(){}}]),t}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(2)),c=r(n(3)),l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){if(e.canvas.chart){var t=new i.default(this.options),n=this.options.appendTo,r=e.canvas.chart.axis,a=e.canvas.chart.data,o=Object.keys(a),l=n.select("g.francy-content"),u=50,s=50,f=50,d=50,p=+n.attr("width")||d3.select("body").node().getBoundingClientRect().width,y=+n.attr("height")||d3.select("body").node().getBoundingClientRect().height;p=p-d-s,y=y-u-f;var h=d3.scaleLinear().range([0,p]).domain(r.x.domain),b=d3.scaleLinear().range([y,0]).domain(r.y.domain),v=[];o.forEach(function(e){return v=v.concat(a[e])}),r.y.domain.length||b.domain([0,d3.max(v,function(e){return e})]),r.x.domain.length||h.domain([0,v.length/o.length]);var g=l.selectAll("g.francy-lines");g.node()||(g=l.append("g").attr("class","francy-lines")),o.forEach(function(e,n){var r=d3.line().x(function(e,t){return h(t)}).y(function(e){return b(e)}),o=g.selectAll(".line"+n).data([a[e]]);o.exit().remove(),o.enter().append("path").style("stroke",function(){return c.default.colors(5*n)}).style("stroke-width","5px").attr("class","francy-line"+n).attr("d",r).on("mouseover",function(n){d3.select(this).transition().duration(250).style("stroke-opacity",.5).style("stroke-width","10px"),t.render({Dataset:e,Value:n})}).on("mouseout",function(){d3.select(this).transition().duration(250).style("stroke-opacity",1).style("stroke-width","5px"),t.unrender()}),o.merge(o)});var m=l.selectAll("g.francy-x-axis");m.node()||(m=l.append("g").attr("class","francy-x-axis")),m.selectAll("*").remove(),m.attr("transform","translate(0,"+y+")").call(d3.axisBottom(h)).append("text").attr("dy",50).attr("dx",p/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.x.title);var x=l.selectAll("g.francy-y-axis");x.node()||(x=l.append("g").attr("class","francy-y-axis")),x.selectAll("*").remove(),x.call(d3.axisLeft(b)).append("text").attr("dx",-50).attr("dy",y/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.y.title);var w=l.selectAll(".francy-legend");w.node()||(w=l.append("g").attr("class","francy-legend")),w.selectAll("*").remove();var _=w.selectAll("g").data(o.slice());return _.exit().remove(),(_=_.enter().append("g").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).merge(_)).append("rect").attr("x",p+20).attr("width",19).attr("height",19).style("fill",function(e,t){return c.default.colors(5*t)}),_.append("text").attr("x",p+80).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(e){return e}),n.zoomToFit(),l}this.logger.debug("No LineChart to render here... continuing...")}},{key:"unrender",value:function(){}}]),t}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(2)),c=r(n(3)),l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){if(e.canvas.chart){var t=new i.default(this.options),n=this.options.appendTo,r=e.canvas.chart.axis,a=e.canvas.chart.data,o=Object.keys(a),l=n.select("g.francy-content"),u=50,s=50,f=50,d=50,p=+n.attr("width")||d3.select("body").node().getBoundingClientRect().width,y=+n.attr("height")||d3.select("body").node().getBoundingClientRect().height;p=p-d-s,y=y-u-f;var h=d3.scaleLinear().range([0,p]).domain(r.x.domain),b=d3.scaleLinear().range([y,0]).domain(r.y.domain),v=[];o.forEach(function(e){return v=v.concat(a[e])}),r.y.domain.length||b.domain([0,d3.max(v,function(e){return e})]),r.x.domain.length||h.domain([0,v.length/o.length]);var g=l.selectAll("g.francy-scatters");g.node()||(g=l.append("g").attr("class","francy-scatters")),o.forEach(function(e,n){var r=g.selectAll(".scatter"+n).data(a[e]);r.exit().remove(),r.enter().append("circle").style("fill",function(){return c.default.colors(5*n)}).attr("class","francy-scatter"+n).attr("r",5).attr("cx",function(e,t){return h(t)}).attr("cy",function(e){return b(e)}).on("mouseover",function(n){d3.select(this).transition().duration(250).style("fill-opacity",.5).attr("r",10),t.render({Dataset:e,Value:n})}).on("mouseout",function(){d3.select(this).transition().duration(250).style("fill-opacity",1).attr("r",5),t.unrender()}),r.merge(r)});var m=l.selectAll("g.francy-x-axis");m.node()||(m=l.append("g").attr("class","francy-x-axis")),m.selectAll("*").remove(),m.attr("transform","translate(0,"+y+")").call(d3.axisBottom(h)).append("text").attr("dy",50).attr("dx",p/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.x.title);var x=l.selectAll("g.francy-y-axis");x.node()||(x=l.append("g").attr("class","francy-y-axis")),x.selectAll("*").remove(),x.call(d3.axisLeft(b)).append("text").attr("dx",-50).attr("dy",y/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.y.title);var w=l.selectAll(".francy-legend");w.node()||(w=l.append("g").attr("class","francy-legend")),w.selectAll("*").remove();var _=w.selectAll("g").data(o.slice());return _.exit().remove(),(_=_.enter().append("g").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).merge(_)).append("rect").attr("x",p+20).attr("width",19).attr("height",19).style("fill",function(e,t){return c.default.colors(5*t)}),_.append("text").attr("x",p+80).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(e){return e}),n.zoomToFit(),l}this.logger.debug("No ScatterChart to render here... continuing...")}},{key:"unrender",value:function(){}}]),t}();t.default=l}])});